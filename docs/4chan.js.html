<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding meta -->
    
    
    <meta name="author" content="Igor Kowalczyk" />
    
    <meta name="description" content="Majo.exe - Discord bot for Fun, Memes, Images, Giveaway, Economy, Anime and NSFW! Majo serve over 100 commands! | Created by Igor Kowalczyk" />
    
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      4chan.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/heading.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Majo.exe</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://discord.com/oauth2/authorize/?permissions=4294967287&scope=bot%20applications.commands&client_id=681536055572430918' class=' menu-link' id='' target='_blank'>- Invite Majo.exe</a></li><li class="menu-li"><a href='https://majoexe.herokuapp.com' class=' menu-link' id='' target=''>- Dashboard</a></li><li class="menu-li"><a href='https://github.com/igorkowalczyk/majobot' class=' menu-link' id='' target='_blank'>- Github</a></li></ul><div class="accordion collapsed" id="4834033" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=1933488><div class="accordion-heading child"><a href="module-4chan.html">4chan</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="module-4chan.html#.run">run</a></li></ul></li></ul> </div></div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        4chan.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Shows a random image from the selected 4chan board
 * @module 4chan
 */
const Discord = require("discord.js")
const https = require("https")
const config = require("../../config")
const prefix = config.prefix

/**
 * Command
 * @param {board/boards} args - The 4chan boards
 */
module.exports = {
 name: "4chan",
 aliases: [],
 description: "Shows a random image from the selected 4chan board",
 category: "Fun",
 timeout: "1000",
 usage: "4chan &lt;board/boards>",
 /**
  * Execute command
  * @param {Discord.Client} client - The Discord client
  * @param {Discord.Message} message - The message of the command
  * @param {string} args - The arguments of the command
  */
 run: async (client, message, args) => {
  try {
   var maxlength = 500
   if (!message.channel.nsfw) {
    return message.lineReply({
     embed: {
      color: 16734039,
      description: "ðŸ’¢ | You can use this command only in an NSFW Channel!",
     },
    })
   }
   let chanargs = args.slice(0).join(" ")
   if (!chanargs) {
    return message.lineReply({
     embed: {
      color: 16734039,
      description: "ðŸ’¢ | Please enter a board! To see all boards check `" + `${prefix}` + " 4chan boards`",
     },
    })
   }
   if (chanargs === "boards") {
    let vboards = new Discord.MessageEmbed().setColor("RANDOM").setTitle("All boards:").setTimestamp().setDescription("`a`, `b`, `c`, `d`, `e`, `f`, `g`, `gif`, `h`, `hr`, `k`, `m`, `o`, `p`, `r`, `s`, `t`, `u`, `v`, `vg`, `vr`, `w`, `wg`, `i`, `ic`, `r9k`, `s4s`, `vip`, `qa`, `cm`, `hm`, `lgbt`, `y`, `3`, `aco`, `adv`, `an`, `asp`, `bant`, `biz`, `cgl`, `ck`, `co`, `diy`, `fa`, `fit`, `gd`, `hc`, `his`, `int`, `jp`, `lit`, `mlp`, `mu`, `n`, `news`, `out`, `po`, `pol`, `qst`, `sci`, `soc`, `sp`, `tg`, `toy`, `trv`, `tv`, `vp`, `wsg`, `wsr`")
    return message.lineReply(vboards)
   }
   const boards = ["a", "b", "c", "d", "e", "f", "g", "gif", "h", "hr", "k", "m", "o", "p", "r", "s", "t", "u", "v", "vg", "vr", "w", "wg", "i", "ic", "r9k", "s4s", "vip", "qa", "cm", "hm", "lgbt", "y", "3", "aco", "adv", "an", "asp", "bant", "biz", "cgl", "ck", "co", "diy", "fa", "fit", "gd", "hc", "his", "int", "jp", "lit", "mlp", "mu", "n", "news", "out", "po", "pol", "qst", "sci", "soc", "sp", "tg", "toy", "trv", "tv", "vp", "wsg", "wsr"]
   var board = chanargs
   if (boards.indexOf(board) == -1) {
    let vb = new Discord.MessageEmbed().setColor(16734039).setDescription("ðŸ’¢ | Please enter a vaild board! To see all boards check `" + `${prefix}` + " 4chan boards`")
    return message.lineReply(vb)
   }
   var board = args
   var page = Math.floor(Math.random() * 10 + 1) // page 1 to 10
   var url = "https://a.4cdn.org/" + board + "/" + page + ".json"
   https.get(url, (res) => {
    res.setEncoding("utf8")
    let body = ""
    res.on("data", (data) => {
     body += data
    })
    res.on("end", (end) => {
     body = JSON.parse(body)
     var postNr = Math.floor(Math.random() * body.threads.length)
     var imgId = body.threads[postNr].posts[0].tim
     var imgExt = body.threads[postNr].posts[0].ext
     var com = body.threads[postNr].posts[0].com
     var sub = body.threads[postNr].posts[0].sub
     if (!sub) {
      sub = "Random 4chan thread"
     }
     if (com == null) {
      com = "**No description!**"
     } else {
      /* (/A/g, "B") = replace all A's with B's */
      com = com.replace(/&lt;br>/g, "\n")
      com = com.replace(/&lt;span class=\"quote\">&amp;gt;/g, ">")
      com = com.replace(/&lt;span class=\"deadlink\">&amp;gt;/g, ">")
      com = com.replace(/&lt;\/span>/g, "")
      com = com.replace(/&amp;quot/g, '"')
      com = com.replace(/&amp;#039;/g, "'")
     }
     var thread = "https://boards.4chan.org/" + board + "/thread/"
     thread += body.threads[postNr].posts[0].no
     var imgUrl = "https://i.4cdn.org/" + board + "/"
     imgUrl += imgId + "" + imgExt
     let embed = new Discord.MessageEmbed()
      .setColor("RANDOM")
      .setTitle("ðŸ€ " + sub, message.guild.iconURL({ dynamic: true, format: "png" }), thread)
      .setDescription(com)
      .addField("Thread:", thread)
      .addField("Image:", imgUrl)
      .setURL(thread)
      .setTimestamp()
      .setFooter("Requested by " + `${message.author.username}` + " â€¢ Image from 4chan boards", message.author.displayAvatarURL({ dynamic: true, format: "png", size: 2048 }))
     if (embed.description.length >= 2048) {
      embed.description = `${embed.description.substr(0, 2045)}...`
     }
     message.lineReply(embed)
     return message.channel.send({
      files: [imgUrl],
     })
    })
   })
  } catch (err) {
   message.lineReply({
    embed: {
     color: 16734039,
     description: "Something went wrong... :cry:",
    },
   })
  }
 },
}
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      Majo.exe - The best Discord bot ever created!
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"4chan","link":"<a href=\"module-4chan.html\">4chan</a>"},{"title":"module:4chan.run","link":"<a href=\"module-4chan.html#.run\">module:4chan.run &rtrif; undefined</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    

    


  </body>

</html>